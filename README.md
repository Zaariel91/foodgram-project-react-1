<h1>praktikum_new_diplom</h1>

![praktikum_new_diplom](https://github.com/vindarval/foodgram-project-react/actions/workflows/foodgram_workflow.yml/badge.svg)

<h2>Описание</h2>

Сайт Foodgram, «Продуктовый помощник».  На этом сервисе пользователи смогут публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список «Избранное», а перед походом в магазин скачивать сводный список продуктов, необходимых для приготовления одного или нескольких выбранных блюд.

<h2>Список технологий</h2>

Python 3
DRF (Django REST framework)
Django ORM
Docker
Gunicorn
nginx
Яндекс Облако(Ubuntu)
PostgreSQL
GIT

<h2>Как запустить проект:</h2>

В проекте представлен Dockerfile - файл с инструкцией по разворачиванию Docker-контейнера веб-приложения.
В файле «docker-compose.yml» описываются запускаемые контейнеры: веб-приложения, СУБД PostgreSQL и сервера Nginx.

Клонирование репозитория:
```
git clone https://github.com/vindarval/foodgram-project-react.git
```
Создаем и активируем виртуальное окружение, обновляем pip:
```
python -m venv venv 
source venv/Scripts/activate
python -m pip install --upgrade pip
```
Входим на удаленный сервер. Устанавливаем docker на сервер:
```
apt install docker.io 
```
Установливаем docker-compose на сервер:
```
curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```
Локально отредактируем файл infra/nginx.conf, обязательно в строке server_name пишем IP-адрес сервера. Копируем файлы docker-compose.yml и nginx.conf из директории infra на сервер.
Для запуска проекта в контейнерах используем docker-compose : docker-compose up -d --build, находясь в директории с docker-compose.yaml.
После сборки контейнеров выполяем:
```
# Выполняем миграции
docker-compose exec backend python manage.py migrate
# Создаем суперппользователя
docker-compose exec backend python manage.py createsuperuser
# Собираем статику со всего проекта
docker-compose exec backend python manage.py collectstatic --no-input
# Для наполнения базы тестовыми данными из backend/data/:
docker-compose exec backend python manage.py load_ingredients
```

<h2>Ресурсы API Foodgram:</h2>

<h3>Рецепт</h3>
Рецепт должен описываться такими полями:
-Автор публикации (пользователь).
-Название.
-Картинка.
-Текстовое описание.
-Ингредиенты: продукты для приготовления блюда по рецепту. -Множественное поле, выбор из предустановленного списка, с указанием количества и единицы измерения.
-Тег (можно установить несколько тегов на один рецепт, выбор из предустановленных).
-Время приготовления в минутах.
Все поля обязательны для заполнения.

<h3>Тег</h3>

Тег должен описываться такими полями:
-Название.
-Цветовой HEX-код (например, #49B64E).
-Slug.
Все поля обязательны для заполнения и уникальны.

<h3>Ингредиент</h3>

Данные об ингредиентах хранятся в нескольких связанных таблицах. В результате на стороне пользователя ингредиент должен описываться такими полями:
-Название.
-Количество.
-Единицы измерения.
Все поля обязательны для заполнения.

<h2>Пользовательские роли в Foodgram:</h2>

1. Анонимный пользователь:
    -Просматривать список рецептов;
    -Просматривать отдельные рецепты;
    -Фильтровать рецепты по тегам;
    -Создавать аккаунт.
2. Аутентифицированный пользователь:
    -Получать данные о своей учетной записи;
    -Изменять свой пароль;
    -Просматривать, публиковать, удалять и редактировать свои рецепты;
    -Добавлять понравившиеся рецепты в избранное и удалять из избранного;
    -Добавлять рецепты в список покупок и удалять из списка;
    -Подписываться и отписываться на авторов;
    -Скачать список покупок.
3. Администратор:
    -Все права авторизованного пользователя
    -Изменение пароля любого пользователя;
    -Создание/блокирование/удаление аккаунтов пользователей;
    -Редактирование/удаление любых рецептов;
    -Добавление/удаление/редактирование ингредиентов;
    -Добавление/удаление/редактирование тегов.

<h2>Аутентификация и создание новых пользователей:</h2>

api/auth/token/login/ - Получение токена.
api/auth/token/logout/ - Удаление токена.

Для добавления нового пользователя нужно отправить POST-запрос на эндпоинт POST /api/users/
В запросе необходимо передать поля:
 - email - (string) почта пользователя;
 - username - (string) уникальный юзернейм пользователя;
 - first_name - (string) имя пользователя;
 - last_name - (string) фамилия пользователя;
 - password - (string) пароль пользователя.
 Пользователь отправляет POST-запрос со своими регистрационными данными email, password на эндпоинт /api/token/login/ , в ответе на запрос ему приходит auth-token. Поученный токен всегда необходимо передавать в заголовке (Authorization: Token TOKENVALUE) для всех запросов, которые требуют авторизации.

<h2>Тестовые данные пользователей:</h2>
Логин: admin (суперюзер)
Email: Kapitoshkaizu@yandex.ru
Пароль: admin

<h2>Список авторов</h2>

Виноградова Дарья.

<h2>URL's:</h2>
```
http://84.252.142.157/
```
